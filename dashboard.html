<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SplitBillEz</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="images/splitbillez_favicon.png">
</head>
<body>
    <header>
        <div class="header-container">
            <img src="images/splitbillez_logo.png" alt="SplitBillEz Logo" class="logo">
            <nav>
                <a href="index.html">Home</a>
                <a href="dashboard.html">Dashboard</a>
                <a href="add-expense.html">Add Expense</a>
            </nav>
            <button class="metamask-button" onclick="connectWallet()">Connect with MetaMask</button>
        </div>
    </header>
    <main>
        <section>
            <h2>Your Groups</h2>
            <div class="group">
                <h3>Trip to Goa</h3>
                <p>You owe Alice $50. You are owed $20 by Bob.</p>
                <button onclick="simulateSettleUp('Trip to Goa', 50, 'Alice')">Settle Up</button>
            </div>
            <div class="group">
                <h3>Dinner Party</h3>
                <p>You owe Charlie $15. You are owed $10 by Dave.</p>
                <button onclick="simulateSettleUp('Dinner Party', 15, 'Charlie')">Settle Up</button>
            </div>
        </section>
    </main>
    <footer>
        <p>© 2025 SplitBillEz Powered by Shardeum</p>
        <div class="social-links">
            <a href="https://discord.com/invite/shardeum" target="_blank" rel="nofollow">
                <img src="images/discord.svg" alt="Discord" class="social-icon">
            </a>
            <a href="https://github.com/BrunoMarshall/SplitBillEz" target="_blank" rel="nofollow">
                <img src="images/github.svg" alt="GitHub" class="social-icon">
            </a>
            <a href="https://www.linkedin.com/company/shardeum/" target="_blank" rel="nofollow">
                <img src="images/linkedin.svg" alt="LinkedIn" class="social-icon">
            </a>
            <a href="https://t.me/shardeum" target="_blank" rel="nofollow">
                <img src="images/telegram.svg" alt="Telegram" class="social-icon">
            </a>
            <a href="https://x.com/shardeum" target="_blank" rel="nofollow">
                <img src="images/twitter.svg" alt="X" class="social-icon">
            </a>
            <a href="https://www.youtube.com/@shardeum" target="_blank" rel="nofollow">
                <img src="images/youtube.svg" alt="YouTube" class="social-icon">
            </a>
        </div>
    </footer>
    <script>
        function connectWallet() {
            alert("Simulated MetaMask connection!");
        }

        function simulateSettleUp(groupName, amountUSD, recipient) {
            // Hypothetical SHM price: $0.10 per SHM
            const shmPrice = 0.10;
            const amountSHM = Math.round(amountUSD / shmPrice); // e.g., $50 ≈ 500 SHM
            const transactionFeeSHM = 0.05; // $0.005 fee ≈ 0.05 SHM
            const transactionHash = '0x' + Math.random().toString(16).substr(2, 64); // Random 32-byte hash
            const explorerLink = `https://explorer.shardeum.org/tx/${transactionHash}`;

            // Simulate transaction
            alert(`Simulating settlement for ${groupName}...\n` +
                  `Sending ${amountSHM} SHM to ${recipient} to settle $${amountUSD}.\n` +
                  `Transaction Fee: ${transactionFeeSHM} SHM (~$0.005).\n` +
                  `Transaction Hash: ${transactionHash}\n` +
                  `View Receipt: ${explorerLink}\n\n` +
                  `Thank you for using the SplitBillEz platform! You will receive 10 SPLIT tokens as gratitude.`);

            // Optional: Update UI to reflect settled amount (e.g., remove "You owe" text)
            const group = document.querySelector(`.group h3`).parentElement;
            if (group.querySelector('p').textContent.includes(`You owe ${recipient}`)) {
                group.querySelector('p').textContent = group.querySelector('p').textContent.replace(`You owe ${recipient} $${amountUSD}.`, `Settled with ${recipient}.`);
                group.querySelector('button').disabled = true;
                group.querySelector('button').textContent = 'Settled';
            }
        }
    </script>
</body>
</html>
